document.getElementById('upload-button').addEventListener('click', function() {
    document.getElementById('image-upload').click(); // Abre a janela de upload
});

document.getElementById('image-upload').addEventListener('change', function(event) {
    const files = Array.from(event.target.files);

    // Verifica se exatamente 8 imagens foram selecionadas
    if (files.length !== 8) {
        alert("Por favor, selecione exatamente 8 imagens.");
        return;
    }

    // Duplicamos as imagens para formar os pares
    const pairedImages = files.flatMap((file, index) => [{ file, id: index }, { file, id: index }]);

    // Embaralha as imagens para que fiquem em posições aleatórias
    const shuffledImages = shuffleImages(pairedImages);

    // Seleciona todas as cartas do jogo
    const cards = document.querySelectorAll('.memory-card');

    // Associa as imagens às cartas do jogo
    shuffledImages.forEach(({ file, id }, index) => {
        const reader = new FileReader();
        reader.onload = function(e) {
            const card = cards[index];
            const imgFront = card.querySelector('.front-face'); // Define a face da carta

            imgFront.src = e.target.result; // Define a imagem carregada
            card.dataset.framework = `custom${id}`; // Atribui um identificador para comparação
        };

        reader.readAsDataURL(file); // Lê a imagem como URL para exibição
    });
});

// Função para embaralhar as imagens
function shuffleImages(images) {
    for (let i = images.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [images[i], images[j]] = [images[j], images[i]]; // Troca posições
    }
    return images;
}
